import{r as o,p as V,g as s,S as O,j as e,c as se}from"./index-BNHmgCd-.js";s.registerPlugin(O);const ie=({id:N})=>{var L,z;const v=o.useRef(null),w=o.useRef(null),[y,C]=o.useState(!1),[X,b]=o.useState(0),[n,F]=o.useState(0),[H,R]=o.useState(!1);o.useEffect(()=>{se()},[]);const a=V.find(t=>t.id===N),A=a==null?void 0:a.challenges,T=a==null?void 0:a.solutions,q=a==null?void 0:a.solutionVideo,Y=a==null?void 0:a.solutionPoster;o.useEffect(()=>{const t=v.current;if(!t||!a||window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const $=s.context(()=>{const x=s.utils.toArray(".work-detail__title-word-inner",t),I=t.querySelector(".work-detail__description"),D=s.utils.toArray(".work-detail__meta-row",t),M=t.querySelector(".work-detail__meta-link"),k=t.querySelector(".work-detail__hero-media"),f=s.utils.toArray(".work-detail__tile",t),d=s.utils.toArray(".work-detail__insight",t),c=s.utils.toArray(".work-detail__insight-media",t),m=t.querySelector(".work-detail__results-header"),u=s.utils.toArray(".work-detail__metric",t),h=t.querySelector(".work-detail__testimonial-card"),_=t.querySelector(".work-detail__more-title"),p=s.utils.toArray(".work-detail__more-card",t);x.length&&s.set(x,{yPercent:120,rotateX:-80,autoAlpha:0,transformOrigin:"50% 100%"}),s.set([I,...D,M].filter(Boolean),{autoAlpha:0,y:18,filter:"blur(8px)"}),s.set([k,...f].filter(Boolean),{autoAlpha:0,y:30,scale:.96,filter:"blur(8px)"}),d.length&&s.set(d,{autoAlpha:0,y:24,filter:"blur(8px)"}),c.length&&s.set(c,{autoAlpha:0,y:24,filter:"blur(8px)"}),m&&s.set(m,{autoAlpha:0,y:22,filter:"blur(6px)"}),u.length&&s.set(u,{autoAlpha:0,y:16}),h&&s.set(h,{autoAlpha:0,y:20,filter:"blur(6px)"}),_&&s.set(_,{autoAlpha:0,y:20,filter:"blur(6px)"}),p.length&&s.set(p,{autoAlpha:0,y:24,scale:.98});const j=s.timeline();x.length&&j.to(x,{yPercent:0,rotateX:0,autoAlpha:1,duration:.9,ease:"power3.out",stagger:.06}),j.to(I,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.6,ease:"power2.out"},"-=0.45"),j.to(D,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.5,ease:"power2.out",stagger:.08},"-=0.4"),M&&j.to(M,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.5,ease:"power2.out"},"-=0.35"),k&&s.to(k,{autoAlpha:1,y:0,scale:1,filter:"blur(0px)",duration:.8,ease:"power2.out",scrollTrigger:{trigger:k,start:"top 80%"}}),f.length&&s.to(f,{autoAlpha:1,y:0,scale:1,filter:"blur(0px)",duration:.7,ease:"power2.out",stagger:.08,scrollTrigger:{trigger:f[0],start:"top 85%"}}),d.length&&s.to(d,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.7,ease:"power2.out",stagger:.18,scrollTrigger:{trigger:d[0],start:"top 82%"}}),c.length&&s.to(c,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.7,ease:"power2.out",scrollTrigger:{trigger:c[0],start:"top 85%"}}),m&&s.to(m,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.7,ease:"power2.out",scrollTrigger:{trigger:m,start:"top 85%"}}),u.length&&s.to(u,{autoAlpha:1,y:0,duration:.6,ease:"power2.out",stagger:.12,scrollTrigger:{trigger:u[0],start:"top 85%"}}),h&&s.to(h,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.7,ease:"power2.out",scrollTrigger:{trigger:h,start:"top 85%"}}),_&&s.to(_,{autoAlpha:1,y:0,filter:"blur(0px)",duration:.6,ease:"power2.out",scrollTrigger:{trigger:_,start:"top 88%"}}),p.length&&s.to(p,{autoAlpha:1,y:0,scale:1,duration:.7,ease:"power2.out",stagger:.12,scrollTrigger:{trigger:p[0],start:"top 85%"}}),O.refresh()},t);return()=>$.revert()},[N,a]);const G=()=>{const t=w.current;if(t)if(t.paused){const r=t.play();r&&typeof r.catch=="function"&&r.catch(()=>{})}else t.pause()},J=t=>{const r=t.currentTarget;F(r.duration||0),b(r.currentTime||0)},K=t=>{H||b(t.currentTarget.currentTime||0)},S=()=>{R(!0)},g=()=>{R(!1)},Q=t=>{const r=Number(t.target.value);Number.isNaN(r)||(b(r),w.current&&(w.current.currentTime=r))},U=t=>{if(!Number.isFinite(t))return"0:00";const r=Math.floor(t/60),$=Math.floor(t%60);return`${r}:${String($).padStart(2,"0")}`};if(!a)return e.jsx("section",{className:"work-detail",ref:v,children:e.jsxs("div",{className:"work-detail__inner px-32 lg:px-48",children:[e.jsx("p",{className:"work-detail__eyebrow",children:"Work not found"}),e.jsx("h1",{className:"work-detail__title",children:"Project missing"}),e.jsx("p",{className:"work-detail__description",children:"The project you are looking for does not exist yet."}),e.jsx("a",{className:"work-detail__back",href:"/#latest-work",children:"Back to latest work"})]})});const Z=(L=a.services)==null?void 0:L.join(" / "),ee=a.description||a.subtitle,W=a.title.split(" "),l=a.results,B=(l==null?void 0:l.metrics)||[],i=l==null?void 0:l.client,te=i!=null&&i.name?i.name.split(" ").map(t=>t[0]).join("").slice(0,2).toUpperCase():"",E=V.filter(t=>t.id!==N).slice(0,2),P=n?Math.min(X,n):0,ae=n?P/n*100:0;return e.jsx("section",{className:"work-detail",ref:v,children:e.jsxs("div",{className:"work-detail__inner px-32 lg:px-48",children:[e.jsxs("div",{className:"work-detail__hero",children:[e.jsxs("div",{className:"work-detail__copy",children:[e.jsx("h1",{className:"work-detail__title",children:W.map((t,r)=>e.jsxs("span",{className:"work-detail__title-word",children:[e.jsx("span",{className:"work-detail__title-word-inner",children:t}),r<W.length-1?" ":""]},`${a.id}-word-${r}`))}),e.jsx("p",{className:"work-detail__description",children:ee})]}),e.jsxs("div",{className:"work-detail__meta",children:[e.jsxs("div",{className:"work-detail__meta-row",children:[e.jsx("span",{className:"work-detail__meta-label",children:"(Year)"}),e.jsx("span",{className:"work-detail__meta-value",children:a.year})]}),e.jsxs("div",{className:"work-detail__meta-row",children:[e.jsx("span",{className:"work-detail__meta-label",children:"(Timeline)"}),e.jsx("span",{className:"work-detail__meta-value",children:a.timeline})]}),e.jsxs("div",{className:"work-detail__meta-row",children:[e.jsx("span",{className:"work-detail__meta-label",children:"(Services)"}),e.jsx("span",{className:"work-detail__meta-value",children:Z})]}),a.liveUrl?e.jsxs("a",{className:"work-detail__meta-link",href:a.liveUrl,target:"_blank",rel:"noreferrer",children:[e.jsx("span",{className:"work-detail__meta-link-text",children:"Live Website"}),e.jsx("svg",{viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"work-detail__meta-link-icon",width:"12","aria-hidden":"true",children:e.jsx("path",{d:"M13.376 11.552l-.264-10.44-10.44-.24.024 2.28 6.96-.048L.2 12.56l1.488 1.488 9.432-9.432-.048 6.912 2.304.024z",fill:"currentColor"})})]}):null]})]}),e.jsxs("div",{className:"work-detail__media",children:[e.jsx("div",{className:"work-detail__hero-media",children:e.jsx("img",{src:a.image,alt:`${a.title} hero`,decoding:"async"})}),e.jsx("div",{className:"work-detail__grid",children:(z=a.gallery)==null?void 0:z.map((t,r)=>e.jsx("div",{className:"work-detail__tile",children:e.jsx("img",{src:t,alt:`${a.title} detail ${r+1}`,loading:"lazy",decoding:"async"})},`${a.id}-gallery-${r}`))})]}),(A||T)&&e.jsxs("div",{className:"work-detail__insights mt-56 xl:mt-80",children:[A&&e.jsxs("div",{className:"work-detail__insight",children:[e.jsx("p",{className:"work-detail__insight-title",children:"Challenges"}),e.jsx("p",{className:"work-detail__insight-body",children:A})]}),T&&e.jsxs("div",{className:"work-detail__insight",children:[e.jsx("p",{className:"work-detail__insight-title",children:"Solutions"}),e.jsx("div",{className:"work-detail__insight-content",children:e.jsx("p",{className:"work-detail__insight-body",children:T})}),q&&e.jsx("div",{className:"work-detail__insight-media-shell",children:e.jsxs("div",{className:"work-detail__insight-media",children:[e.jsx("video",{ref:w,className:"work-detail__insight-video",src:q,poster:Y,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata",onPlay:()=>C(!0),onPause:()=>C(!1),onLoadedMetadata:J,onTimeUpdate:K,"aria-label":`${a.title} solution video`}),e.jsxs("div",{className:"work-detail__video-controls",children:[e.jsxs("div",{className:"work-detail__video-time",children:[e.jsx("span",{children:U(P)}),e.jsx("span",{children:U(n)})]}),e.jsx("input",{className:"work-detail__video-progress",type:"range",min:"0",max:n||0,step:"0.1",value:P,onChange:Q,onPointerDown:S,onPointerUp:g,onPointerCancel:g,onMouseDown:S,onMouseUp:g,onTouchStart:S,onTouchEnd:g,style:{"--progress":`${ae}%`},"aria-label":"Video progress"})]}),e.jsx("button",{type:"button",className:"work-detail__video-button",onClick:G,"aria-label":y?"Pause video":"Play video","aria-pressed":y,children:y?e.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[e.jsx("rect",{x:"6.5",y:"5",width:"4.5",height:"14"}),e.jsx("rect",{x:"13",y:"5",width:"4.5",height:"14"})]}):e.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:e.jsx("path",{d:"M8 5.5l10 6.5-10 6.5z"})})})]})})]})]}),l&&e.jsxs("div",{className:"work-detail__results",children:[e.jsxs("div",{className:"work-detail__results-header",children:[e.jsx("p",{className:"work-detail__insight-title",children:"Results"}),e.jsxs("div",{className:"work-detail__results-content",children:[l.summary&&e.jsx("p",{className:"work-detail__results-summary",children:l.summary}),B.length>0&&e.jsx("div",{className:"work-detail__metrics",children:B.map((t,r)=>e.jsxs("div",{className:"work-detail__metric",children:[e.jsx("span",{className:"work-detail__metric-value",children:t.value}),e.jsx("span",{className:"work-detail__metric-label",children:t.label})]},`${a.id}-metric-${r}`))})]})]}),(i==null?void 0:i.quote)&&e.jsx("div",{className:"work-detail__testimonial",children:e.jsxs("div",{className:"work-detail__testimonial-card",children:[e.jsx("span",{className:"work-detail__testimonial-mark","aria-hidden":"true",children:"“"}),e.jsx("p",{className:"work-detail__testimonial-body",children:i.quote}),e.jsx("div",{className:"work-detail__testimonial-divider"}),e.jsxs("div",{className:"work-detail__client",children:[i.avatar?e.jsx("img",{className:"work-detail__client-avatar",src:i.avatar,alt:`${i.name} portrait`,loading:"lazy",decoding:"async"}):e.jsx("div",{className:"work-detail__client-avatar work-detail__client-avatar--placeholder",children:te}),e.jsxs("div",{className:"work-detail__client-meta",children:[e.jsx("p",{className:"work-detail__client-name",children:i.name}),e.jsxs("p",{className:"work-detail__client-role",children:[i.role,i.company?` at ${i.company}`:""]})]})]})]})})]}),E.length>0&&e.jsxs("div",{className:"work-detail__more",children:[e.jsxs("div",{className:"work-detail__more-header",children:[e.jsx("h2",{className:"work-detail__more-title",children:"More Works"}),e.jsxs("a",{className:"work-detail__more-link",href:"/works",children:[e.jsx("span",{className:"work-detail__more-link-text",children:"See All"}),e.jsx("span",{className:"work-detail__more-link-icon","aria-hidden":"true",children:"↗"})]})]}),e.jsx("div",{className:"work-detail__more-grid",children:E.map(t=>e.jsxs("a",{className:"work-detail__more-card",href:`/works/${encodeURIComponent(t.id)}`,children:[e.jsx("div",{className:"work-detail__more-media",children:e.jsx("img",{src:t.image,alt:`${t.title} preview`,loading:"lazy",decoding:"async"})}),e.jsxs("div",{className:"work-detail__more-meta",children:[e.jsx("p",{className:"work-detail__more-name",children:t.title}),e.jsx("p",{className:"work-detail__more-subtitle",children:t.subtitle})]})]},t.id))})]})]})})};export{ie as default};
